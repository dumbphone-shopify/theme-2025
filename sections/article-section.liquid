{{ 'video-section.css' | asset_url | stylesheet_tag }}
{{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}

{% schema %}
  {
    "name": "Artikelsektion",
    "tag": "article",
    "class": "custom-article",
    "limit": 1,
    "presets": [
      {
        "name": "Artikelsektion"
      }
    ],
    "settings": [
      {
        "type": "select",
        "id": "hero_type",
        "label": "Hero-billede",
        "options": [
          {
            "value": "image",
            "label": "Billede"
          }, {
            "value": "video",
            "label": "Video"
          }
        ],
        "default": "image"
      },
      {
        "type": "image_picker",
        "id": "hero_image",
        "label": "t:sections.video.settings.cover_image.label"
      },
      {
        "type": "video_url",
        "id": "hero_video_url",
        "accept": ["youtube", "vimeo"],
        "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc",
        "label": "t:sections.video.settings.video_url.label",
        "info": "t:sections.video.settings.video_url.info"
      },
      {
        "type": "image_picker",
        "id": "hero_video_thumbnail",
        "label": "Uploade din egen video thumbnail"

      }, {
        "type": "text",
        "id": "hero_title",
        "label": "Rubrik"
      }
    ],
    "blocks": [
      {
        "type": "heading",
        "name": "Ny titel",
        "settings": [
          {
            "type": "text",
            "id": "heading",
            "label": "t:sections.video.settings.description.label",
            "info": "t:sections.video.settings.description.info"
          }
        ]
      },
      {
        "type": "h3",
        "name": "Underoverskrift",
        "settings": [
          {
            "type": "text",
            "id": "heading",
            "label": "Underoverskrift"
          }
        ]
      },
      {
        "type": "h4",
        "name": "Mellemoverskrift",
        "settings": [
          {
            "type": "text",
            "id": "heading",
            "label": "Mellemoverskrift"
          }
        ]
      },
      {
        "type": "paragraph",
        "name": "Paragraf",
        "settings": [
          {
            "type": "richtext",
            "id": "text",
            "label": "Paragraf"
          }
        ]
      }, {
        "type": "pull_quote",
        "name": "Citatboks",
        "settings": [
          {
            "type": "text",
            "id": "quote",
            "label": "Citat"
          }
        ]
      }, {
        "type": "image",
        "name": "Billede",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Billede til artikel"
          }, {
            "type": "text",
            "id": "alt",
            "label": "Alternativ billedetekst"
          }, {
            "type": "select",
            "id": "image_size",
            "label": "Billedets størrelse",
            "options": [
              {
                "value": "large",
                "label": "Stor"
              }, {
                "value": "medium",
                "label": "Mellem"
              }, {
                "value": "small",
                "label": "Lille"
              }
            ],
            "default": "large"
          }
        ]
      }
    ]
  }
{% endschema %}

{% stylesheet %}
  :root  {
    --col-50: clamp(0rem, -1.1364rem + 5.6818vw, 3.125rem);
    --col-100: clamp(0rem, -2.2727rem + 11.3636vw, 6.25rem);
    --img-article-pad: clamp(2rem, 1.8261rem + 0.8696vw, 2.5rem);
    --inner-article: clamp(20rem, 15.4545rem + 22.7273vw, 32.5rem);
  }

  .article-wrapper {
    display: grid;
    grid-template-columns: [full-start] var(--col-100) [breakout-start] var(--col-100) [content-start] var(--col-50) [inner] 7fr var(--col-50) [content-end] var(--col-100) [breakout-end] var(--col-100) [full-end];
  }


  .article-hero {
    grid-column: full;
    display: grid;
    grid-template-columns: subgrid;
  }


  .article-hero img,
  .article-hero iframe,
  .article-hero video,
  .article-hero .media--landscape {
    grid-column: full;
    width: 100%;
    height: auto;
    display: block;
    margin-inline: auto;
    max-width: 1000px;
  }

  /* article video settings  */

  .deferred-media {
    position: relative;
    padding-bottom: var(--ratio-percent, 56.25%);
    height: 0;
    display: block;
  }

  .deferred-media > * {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }


  .article-title {
    margin: 2rem 0 1rem;
    font-size: 3.25rem;
    line-height: 1.2;

  }


  .article-content {
    grid-column: full;
    display: grid;
    grid-template-columns: [full-start] var(--col-100) [breakout-start] var(--col-100) [content-start] var(--col-50) [inner] 4fr var(--col-50) [content-end] var(--col-100) [breakout-end] var(--col-100) [full-end]
  }

  .article-content p,
  .text-content,
  .article-title {
    grid-column: inner;
    max-width: 550px;
    margin-inline: auto;
    width: 100%;
  }


  .article-image {
    display: block;
    margin-inline: auto;
    width: 100%;
    padding: var(--img-article-pad) 0;
  }

  .article-image--large {
    grid-column: full;
    max-width: 800px;
  }

  .article-image--medium {
    grid-column: content;
    max-width: 600px;
  }

  .article-image--small {
    grid-column: inner;
    max-width: 300px;
  }

  .pull-quote {
    grid-column: inner;
    font-size: 2.5rem;
    font-style: italic;
    font-family: Georgia
    , 'Times New Roman'
    , Times
    , serif;
    position: relative;
    margin: 2rem auto;
    padding: 1.2rem 0 0 1.5rem;
    line-height: 1.5;
    border: none;
    max-width: 600px;
    width: 100%;
  }

  .pull-quote::before {
    content: '“';
    font-size: 5rem;
    color: #999;
    position: absolute;
  }

  .pull-quote::before {
    top: 0;
    left: -1rem;
  }

  h3.text-content {
    margin: 1rem auto 0;
  }

  p.text-content {
    margin: 0.5rem auto;
  }

  h4.text-content {
    margin: 0.5rem auto 0;
  }

  h2 {
    margin-bottom: 0.5rem;
  }
  .text-content:is(h2):not(:first-of-type) {
    margin-top: 3rem;
  }

  /* video hero section  */


  /*
   iframe {
   aspect-ratio: 16/9;
   }
*/.article-hero__video {
    height: auto;
  }


  .section-{{ section.id }}
  -padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }


{% endstylesheet %}

<div class="article-wrapper">
  {% if section.settings.hero_type == 'image' and section.settings.hero_image %}

    <div class="article-hero">
      <img src="{{ section.settings.hero_image | image_url: width: 2000 }}" alt="{{ section.settings.hero_image.alt | escape }}" />
    </div>

  {% elsif section.settings.hero_type == 'video' and section.settings.hero_video_url != blank %}
    {% assign video_type = section.settings.hero_video_url.type %}
    {% assign video_id = section.settings.hero_video_url.id %}
    {% assign video_type = section.settings.hero_video_url.type %}
    {% assign poster = section.settings.hero_video_thumbnail %}
    {% assign alt = section.settings.hero_title | default: "Hero Video" %}

      <div class="article-hero article-hero__video">
        <deferred-media
          class="deferred-media video-section__media gradient global-media-settings"
          data-media-id="{{ video_id }}"
          {% if poster != blank %}
            style="--ratio-percent: 56.25%;"
          {% endif %}>
          <button
            id="Deferred-Poster-Modal-{{ video_id }}"
            class="media deferred-media__poster-button video-section__poster media--landscape"
            type="button"
            aria-label="{{ alt }}">
            {% if poster != blank %}
              <img src="{{ poster | image_url: width: 3840 }}" alt="{{ alt }}">
            {% else %}
              {{ 'hero-apparel-3' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
            {% endif %}
            <span class="deferred-media__poster-button motion-reduce">
              <span class="svg-wrapper">
                {{ 'icon-play.svg' | inline_asset_content }}
              </span>
            </span>
          </button>
          <template>
              {%- if video_type == 'youtube' -%}
                <iframe
              src="https://www.youtube.com/embed/{{ video_id }}?enablejsapi=1&autoplay=1"
              class="js-youtube"
              allow="autoplay; encrypted-media"
              allowfullscreen
              title="{{ alt }}"
            ></iframe>
            {% elsif video_type == 'vimeo' %}
              <iframe
                src="https://player.vimeo.com/video/{{ video_id }}?autoplay=1"
                class="js-vimeo"
                allow="autoplay; encrypted-media"
                allowfullscreen
                title="{{ alt }}"
              ></iframe>
            {% endif %}
          </template>
        </deferred-media>
      </div>
    {% endif %}



  <div class="article-content">
    {% if section.settings.hero_title != blank %}
      <h1 class="article-title">{{ section.settings.hero_title }}</h1>
    {% endif %}

    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'heading' %}
          <h2 class="text-content">{{ block.settings.heading }}</h2>
        {% when 'h3' %}
          <h3 class="text-content">{{ block.settings.heading }}</h3>
        {% when 'h4' %}
          <h4 class="text-content">{{ block.settings.heading }}</h4>
        {% when 'paragraph' %}
          <p class="article-paragraph text-content">{{ block.settings.text }}</p>
        {% when 'pull_quote' %}
          <blockquote class="pull-quote">
            {{ block.settings.quote }}
          </blockquote>

        {% when 'image' %}
          <img
        class="article-image article-image--{{ block.settings.image_size }}"
        src="{{ block.settings.image | image_url: width: 1200 }}"
        alt="{{ block.settings.alt | escape }}" />
      {% endcase %}
    {% endfor %}
  </div>
</div>