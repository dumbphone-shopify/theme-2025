{{ 'video-section.css' | asset_url | stylesheet_tag }}
{{ 'component-deferred-media.css' | asset_url | stylesheet_tag }}

{% schema %}
{
  "name": "Artikelsektion",
  "tag": "article",
  "class": "custom-article",
  "limit": 1,
  "presets": [
    {
      "name": "Artikelsektion"
    }
  ],
  "settings": [
    {
      "type": "select",
      "id": "hero_type",
      "label": "Hero-billede",
      "options": [
        {
          "value": "image",
          "label": "Billede"
        },
        {
          "value": "video",
          "label": "Video"
        }
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "t:sections.video.settings.cover_image.label"
    },
    {
      "type": "video_url",
      "id": "hero_video_url",
      "accept": ["youtube", "vimeo"],
      "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc",
      "label": "t:sections.video.settings.video_url.label",
      "info": "t:sections.video.settings.video_url.info"
    },
    {
      "type": "image_picker",
      "id": "hero_video_thumbnail",
      "label": "Uploade din egen video thumbnail"
    },
    {
      "type": "text",
      "id": "hero_title",
      "label": "Rubrik"
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Ny titel",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "t:sections.video.settings.description.label",
          "info": "t:sections.video.settings.description.info"
        }
      ]
    },
    {
      "type": "h3",
      "name": "Underoverskrift",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Underoverskrift"
        }
      ]
    },
    {
      "type": "h4",
      "name": "Mellemoverskrift",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Mellemoverskrift"
        }
      ]
    },
    {
      "type": "paragraph",
      "name": "Paragraf",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "label": "Paragraf"
        }
      ]
    },
    {
      "type": "pull_quote",
      "name": "Citatboks",
      "settings": [
        {
          "type": "text",
          "id": "quote",
          "label": "Citat"
        }
      ]
    },
    {
      "type": "image",
      "name": "Billede",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Billede til artikel"
        },
        {
          "type": "text",
          "id": "alt",
          "label": "Alternativ billedetekst"
        },
        {
          "type": "select",
          "id": "image_size",
          "label": "Billedets størrelse",
          "options": [
            {
              "value": "large",
              "label": "Stor"
            },
            {
              "value": "medium",
              "label": "Mellem"
            },
            {
              "value": "small",
              "label": "Lille"
            }
          ],
          "default": "large"
        }
      ]
    }
  ]
}
{% endschema %}

{% stylesheet %}
  :root {
    --col-50: clamp(0rem, -1.1364rem + 5.6818vw, 3.125rem);
    --col-100: clamp(0rem, -2.2727rem + 11.3636vw, 6.25rem);
    --img-article-pad: clamp(2rem, 1.8261rem + 0.8696vw, 2.5rem);
    --inner-article: clamp(20rem, 15.4545rem + 22.7273vw, 32.5rem);
  }

  .article-wrapper {
    display: grid;
    grid-template-columns:
      [full-start] var(--col-100) [breakout-start] var(--col-100) [content-start] var(--col-50) [inner] 7fr var(
        --col-50
      )
      [content-end] var(--col-100) [breakout-end] var(--col-100) [full-end];
  }

  .article-hero {
    grid-column: full;
    display: grid;
    grid-template-columns: subgrid;
  }

  .article-hero img,
  .article-hero iframe,
  .article-hero video,
  .article-hero .deferred-media {
    grid-column: full;
    width: 100%;
    height: auto;
    display: block;
    margin-inline: auto;
    max-width: 1000px;
  }

  /* article video settings  */

  .deferred-media {
    aspect-ratio: 16 / 9;
    width: 100%;
    max-width: 1000px;
    min-width: 250px;
    min-height: 140px;
    margin-inline: auto;
    background: #000;
    display: block;
    position: relative;
    overflow: hidden;
    height: 0;
  }
  @supports (aspect-ratio: 16 / 9) {
    .deferred-media {
      height: auto;
      padding-bottom: 0;
    }
  }
  .deferred-media > * {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* article title  */

  .article-title {
    margin: 2rem 0 1rem;
    font-size: 3.25rem;
    line-height: 1.2;
  }

  .article-content {
    grid-column: full;
    display: grid;
    grid-template-columns:
      [full-start] var(--col-100) [breakout-start] var(--col-100) [content-start] var(--col-50) [inner] 4fr var(
        --col-50
      )
      [content-end] var(--col-100) [breakout-end] var(--col-100) [full-end];
  }

  .article-content p,
  .text-content,
  .article-title {
    grid-column: inner;
    max-width: 550px;
    margin-inline: auto;
    width: 100%;
  }

  .article-image {
    border-radius: 25px;
    display: block;
    width: 100%;
    margin: var(--img-article-pad) auto;
  }

  .article-image--large {
    grid-column: full;
    max-width: 800px;
  }

  .article-image--medium {
    grid-column: content;
    max-width: 600px;
  }

  .article-image--small {
    grid-column: inner;
    max-width: 300px;
  }

  .pull-quote {
    grid-column: inner;
    font-size: 2.5rem;
    font-style: italic;
    font-family: Georgia, 'Times New Roman', Times, serif;
    position: relative;
    margin: 2rem auto;
    padding: 1.2rem 0 0 1.5rem;
    line-height: 1.5;
    border: none;
    max-width: 600px;
    width: 100%;
  }

  .pull-quote::before {
    content: '“';
    font-size: 5rem;
    color: #999;
    position: absolute;
  }

  .pull-quote::before {
    top: 0;
    left: -1rem;
  }

  h3.text-content {
    margin: 1rem auto 0;
  }

  p.text-content {
    margin: 0.5rem auto;
  }

  h4.text-content {
    margin: 0.5rem auto 0;
  }

  h2 {
    margin-bottom: 0.5rem;
  }
  .text-content:is(h2):not(:first-of-type) {
    margin-top: 3rem;
  }

  /* video hero section  */

  .article-hero button {
    height: 100%;
  }

  .video-section__media {
    padding-bottom: 0;
  }

  iframe,
  .deferred-media__poster, .article-hero img {
    border-radius: 25px !important;
  }

  /* no border radius on imgs or videos in mobile view  */
  @media screen and (max-width: 1000px) {
    .article-image--medium,   .article-image--large,   iframe,
  .deferred-media__poster, .article-hero img   {
    border-radius: 0px !important;
  }
}


  */
{% endstylesheet %}

{% assign hero_type = article.metafields.custom.hero_type.value %}
{% assign hero_title = article.metafields.custom.hero_title.value %}
{% assign hero_image = article.metafields.custom.hero_image %}
{% assign hero_video_url = article.metafields.custom.hero_video_url %}
{% assign hero_thumb = article.metafields.custom.hero_video_thumb %}

<div class="article-wrapper">
  {% if hero_type == 'image' and hero_image %}
    <div class="article-hero">
      <img src="{{ hero_image | image_url: width: 2000 }}" alt="{{ hero_image.alt | escape }}">
    </div>
  {% elsif hero_type == 'video' and hero_video_url %}
    <div class="article-hero article-hero__video">
      <deferred-media class="deferred-media" data-media-id="video">
        <button class="deferred-media__poster" type="button" aria-label="{{ hero_title }}">
          {% if hero_thumb %}
            {{ hero_thumb | image_url: width: 2000 | image_tag: alt: hero_title }}
          {% endif %}
          <span class="deferred-media__poster-button">▶</span>
        </button>
        <template>
          <iframe
            src="{{ hero_video_url }}?autoplay=1"
            allow="autoplay; encrypted-media"
            allowfullscreen
            title="{{ hero_title }}"
          ></iframe>
        </template>
      </deferred-media>
    </div>
  {% endif %}

  <div class="article-content">
    {% if hero_title %}
      <h1 class="article-title">{{ hero_title }}</h1>
    {% endif %}

    {{ article.metafields.custom.article_body | metafield_tag }}
  </div>
</div>
